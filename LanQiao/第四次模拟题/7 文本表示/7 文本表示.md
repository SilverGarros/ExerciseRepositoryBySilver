## 文本表示

#### 介绍

在各大新媒体平台，存在大量的用户发布的文本，这些文本都是宝贵的数据资源，而对文本进行向量化表征是文本资源化的一大关键步骤，能够应用于下游的各大任务。比如在社交平台，句向量可以用于计算用户所发布的条文内容之间的相似度，以便进行信息检索、推荐相关内容。

目前你们小组面临这样一个任务，基于一个已训练好的词向量模型，构建一个句子相似度计量的应用，能够针对所输入的两个句子以及定义的文本相似度计算方法，计算两者间的相似度。

#### 准备

开始答题前，请确认当前目录 /home/project 下包含以下文件：

- word2vec_model.bin，已训练好的词向量模型。
- task.py，是你后续答题过程中编写代码的地方。

#### 目标

请在 `task.py` 文件中根据以下要求编写函数代码。 

**函数 `get_w2v`**

- 功能：调用训练好的词向量模型，获取词的词向量。
- 参数：
  - `word `：string，一个词。
- 返回值：
  - `word_vector`：如果输入词在模型词汇表中，则返回一个 numpy.ndarray 类型的词向量，如果不在，则返回 None。

**函数 `get_sentence_vector`**

- 功能：获取句子的向量表示，具体方法为：
  - 遍历句子中的每一个词，调用 `get_w2v` 函数，获取词向量表示。
  - 计算所有词向量的平均值作为句子的向量表示。如果一个句子中所有词向量均为 None，则返回一个形状为 (100,) 的全零向量。
- 参数：
  - `sentence `：list，一个经分词处理后的句子。
- 返回值：
  - `sentence_vector`：numpy.ndarray，句向量。如果句子中的词语没有对应的词向量，则返回一个全零向量。

基于以下代码补充 `#TODO` 处的函数代码，并执行 `main()` 函数，确保能够实现以下目标：

- 正确实现函数功能。
- `main()` 函数中能够输出正确的相似度数值。

> 提示：点击代码块右上方的 `copy` 按钮，将代码完整复制到右侧环境中后开始编码。

#### 代码

```Python
import jieba
import numpy as np
from gensim.models import Word2Vec
from sklearn.metrics.pairwise import cosine_similarity

w2v_file_path = "word2vec_model.bin"
W2V_MODEL= Word2Vec.load(w2v_file_path)
W2V_SIZE = 100

def get_w2v(word):
    #TODO



def get_sentence_vector(sentence):
    #TODO



def get_similarity(array1, array2):
    array1_2d = np.reshape(array1, (1, -1))
    array2_2d = np.reshape(array2, (1, -1))
    similarity = cosine_similarity(array1_2d, array2_2d)[0][0]
    return similarity

def main():

    # 测试两个句子
    sentence1 = '我不喜欢看新闻。'
    sentence2 = '我觉得新闻不好看。'
    sentence_split1 = jieba.lcut(sentence1)
    sentence_split2 = jieba.lcut(sentence2)
    # 获取句子的句向量
    sentence1_vector = get_sentence_vector(sentence_split1)
    sentence2_vector = get_sentence_vector(sentence_split2)
    # 计算句子的相似度
    similarity = get_similarity(sentence1_vector, sentence2_vector)
    print(similarity) 

if __name__ == '__main__':
    main()
```

#### 规定

- 务必在 #TODO 所在的函数范围内编写代码，以免造成判题不通过。
- 切勿删除以上代码块中的任何字符，以免造成判题不通过。
- 切勿修改任务中默认提供的文件名称、函数名称等，以免造成判题不通过。

#### 判分标准

- 实现目标，得 10 分；
- 未实现目标，得 0 分。
> 总通过次数: 47  |  总提交次数: 46  |  通过率: 100%
> 难度: 简单   标签: Python, 文本处理, 无监督学习